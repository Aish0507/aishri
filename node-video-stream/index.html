<!DOCTYPE html>
<html lang="en">

<head>

    <!-- Meta Tag -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- SEO -->
    <meta name="description" content="150 words">
    <meta name="author" content="uipasta">
    <meta name="url" content="http://www.yourdomainname.com">
    <meta name="copyright" content="company name">
    <meta name="robots" content="index,follow">
    <title>Aishvarya - Personal Blog</title>
    <!-- Favicon -->
    <link rel="shortcut icon" href="../images/favicon/favicon-new.ico">
    <link rel="apple-touch-icon" sizes="144x144" type="image/x-icon" href="../images/favicon/apple-touch-icon.png">

    <!-- All CSS Plugins -->
    <link rel="stylesheet" type="text/css" href="../css/plugin.css">

    <!-- Main CSS Stylesheet -->
    <link rel="stylesheet" type="text/css" href="../css/style.css">

    <!-- Google Web Fonts  -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:400,300,500,600,700">

    <!-- Syntax Highlighter  -->
    <link rel="stylesheet" type="text/css" href="../css/syntax/shCore.css">
    <link rel="stylesheet" type="text/css" href="../css/syntax/shThemeDefault.css">


    <!-- HTML5 shiv and Respond.js support IE8 or Older for HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body>
<!-- Preloader Start -->
<div class="preloader">
    <div class="rounder"></div>
</div>
<!-- Preloader End -->


<div id="main">
    <div class="container">
        <div class="row">
            <!-- About Me (Left Sidebar) Start -->
            <div class="col-md-3">
                <div class="about-fixed">

                    <div class="my-pic">
                        <img src="../images/pic/banner-bg.jpg" alt="">
                        <a href="javascript:void(0)" class="collapsed" data-target="#menu" data-toggle="collapse"><i
                                class="icon-menu menu"></i></a>
                        <div id="menu" class="collapse">
                            <ul class="menu-link">
                                <li><a href="../about.html">About</a></li>
                                <li><a href="../work.html">Work</a></li>
                                <li><a href="../contact.html">Contact</a></li>
                            </ul>
                        </div>
                    </div>


                    <div class="my-detail">

                        <div class="white-spacing">
                            <h1> Aishvarya Shrivastava</h1>
                            <span>Full Stack Developer</span>
                        </div>

                        <ul class="social-icon">
                            <li><a href="#" target="_blank" class="facebook"><i class="fa fa-facebook"></i></a></li>
                            <li><a href="#" target="_blank" class="twitter"><i class="fa fa-twitter"></i></a></li>
                            <li><a href="#" target="_blank" class="linkedin"><i class="fa fa-linkedin"></i></a></li>
                            <li><a href="#" target="_blank" class="github"><i class="fa fa-github"></i></a></li>
                        </ul>

                    </div>
                </div>
            </div>
            <!-- About Me (Left Sidebar) End -->


            <!-- Blog Post (Right Sidebar) Start -->
            <div class="col-md-9">
                <div class="col-md-12 page-body">
                    <div class="row">
                        <div class="sub-title">
                            <a href="../index.html" title="Go to Home Page"><h2>Back Home</h2></a>
                            <!--<a href="#comment" class="smoth-scroll"><i class="icon-bubbles"></i></a>-->
                        </div>

                        <div class="col-md-12 content-page">
                            <div class="col-md-12 blog-post">
                                <!-- Post Headline Start -->
                                <div class="post-title">
                                    <h1>How to processed video stream with Node/Express API and HTML 5</h1>
                                </div>
                                <!-- Post Headline End -->
                                <!-- Post Detail Start -->
                                <div class="post-info">
                                    <span>August 7, 2018 / by <a href="#"
                                                                 target="_blank"> Aishvarya Shrivastava</a></span>
                                </div>
                                <!-- Post Detail End -->
                                <p><strong>Streams </strong> are collections of data — just like arrays or strings.
                                    The difference is that streams might not be available all at once, and they don’t
                                    have to
                                    fit in memory. This makes streams really powerful when working with large amounts of
                                    data, or data that’s coming from an external source one chunk at a time.
                                    However, streams are not only about working with big data. They also give us the
                                    power of composability in our code</p>
                                <!-- Post Image Start -->
                                <div class="post-image margin-top-40 margin-bottom-40">
                                    <img src="../images/blog/node-stream/nodestram.jpeg" alt="">
                                    <!--<p>Image source from <a href="#" target="_blank">Link</a></p>-->
                                </div>
                                <!-- Post Image End -->
                                <p>
                                    Videos work by streaming, meaning that instead of sending everything to the front
                                    end in a single package you should send it in little chunks at a time.
                                    Sending it by streams would mean that instead of having to wait for the page to
                                    download the whole video from the server before being able to watch it you can
                                    instead request the server for the first few seconds of the video and download the
                                    rest while it plays out.
                                    You can also use this approach for sending big chunks of text for example making the
                                    client wait less for the first few lines of an article to show up.
                                </p>
                                <p>
                                <h3>
                                    Let's start with coding stuff.
                                </h3>
                                </p>
                                <!-- Post Coding (SyntaxHighlighter) Start -->
                                <div class="margin-top-40 margin-bottom-40">
                                   <pre class="brush: js">
                                   /* Server.js */
                                    const express = require('express')
                                    const fs = require('fs')
                                    const path = require('path')
                                    const app = express()

                                    app.use(express.static(path.join(__dirname, 'public')))

                                    app.get('/', function(req, res) {
                                      res.sendFile(path.join(__dirname + '/index.htm'))
                                    })

                                    app.get('/video', function(req, res) {
                                      const path = 'assets/sample.mp4'
                                      const stat = fs.statSync(path)
                                      const fileSize = stat.size
                                      const range = req.headers.range

                                      if (range) {
                                        const parts = range.replace(/bytes=/, "").split("-")
                                        const start = parseInt(parts[0], 10)
                                        const end = parts[1]
                                          ? parseInt(parts[1], 10)
                                          : fileSize-1

                                        const chunksize = (end-start)+1
                                        const file = fs.createReadStream(path, {start, end})
                                        const head = {
                                          'Content-Range': `bytes ${start}-${end}/${fileSize}`,
                                          'Accept-Ranges': 'bytes',
                                          'Content-Length': chunksize,
                                          'Content-Type': 'video/mp4',
                                        }

                                        res.writeHead(206, head)
                                        file.pipe(res)
                                      } else {
                                        const head = {
                                          'Content-Length': fileSize,
                                          'Content-Type': 'video/mp4',
                                        }
                                        res.writeHead(200, head)
                                        fs.createReadStream(path).pipe(res)
                                      }
                                    })

                                    app.listen(3000, function () {
                                      console.log('Listening on port 3000!')
                                    })
                                  </pre>
                                    <pre class="brush: js">
                                     /* index.htm */
                                    <video id="videoPlayer" controls>
                                      <source src="http://localhost:3000/video" type="video/mp4">
                                    </video>
                                    <button id="toggleButton">Start/Stop</button>
                                    <script src="index.js"></script>
                                    </pre>
                                    <pre class="brush: js">
                                     /* index.js */
                                       document.addEventListener('DOMContentLoaded', init, false);
                                        function init() {
                                          const VP = document.getElementById('videoPlayer')
                                          const VPToggle = document.getElementById('toggleButton')
                                          VPToggle.addEventListener('click', function() {
                                            if (VP.paused) VP.play()
                                            else VP.pause()
                                          })
                                        }
                                    </pre>
                                    <pre class="brush: js">
                                     /* package.json */
                                       {
                                          "name": "node-video-process",
                                          "version": "1.0.0",
                                          "description": "Streaming video",
                                          "main": "server.js",
                                          "engines": {
                                            "node": ">=6.2.0"
                                          },
                                          "scripts": {
                                            "start": "nodemon server.js"
                                          },
                                          "author": "Aish0507",
                                          "license": "MIT",
                                          "dependencies": {
                                            "express": "^4.15.3",
                                            "nodemon": "^1.11.0"
                                          }
                                        }

                                    </pre>
                                    <pre class="brush: html">
                                        Dummy video link - http://video.pixeles.com
                                    </pre>
                                </div>
                                <!-- Post List Style End -->
                                <!-- Post Author Bio Box Start -->
                                <div class="about-author margin-top-70 margin-bottom-50">

                                    <!--<div class="picture">-->
                                    <!--<img src="../images/blog/author.png" class="img-responsive" alt="">-->
                                    <!--</div>-->

                                    <div class="">
                                        <h3>Article By <a href="#" target="_blank" data-toggle="tooltip"
                                                          data-placement="top" title="Visit Aishvarya Website">Aishvarya
                                            Shrivastava</a></h3>

                                    </div>
                                </div>
                                <!-- Post Author Bio Box End -->


                                <!-- You May Also Like Start -->
                                <!--<div class="you-may-also-like margin-top-50 margin-bottom-50">-->
                                <!--<h3>You may also like</h3>-->
                                <!--<div class="row">-->

                                <!--<div class="col-md-4 col-sm-6 col-xs-12">-->
                                <!--<a href="single.html"><p>Make mailchimp singup form working with ajax using-->
                                <!--jquery plugin</p></a>-->
                                <!--</div>-->

                                <!--<div class="col-md-4 col-sm-6 col-xs-12">-->
                                <!--<a href="single.html"><p>How to design elegant e-mail newsletter in html for-->
                                <!--wish christmas to your subscribers?</p></a>-->
                                <!--</div>-->

                                <!--<div class="col-md-4 col-sm-6 col-xs-12">-->
                                <!--<a href="single.html"><p>How to customize a wordpress theme entirely from-->
                                <!--scratch using a child theme?</p></a>-->
                                <!--</div>-->

                                <!--</div>-->
                                <!--</div>-->
                                <!-- You May Also Like End -->


                                <!-- Post Comment (Disqus) Start -->
                                <!--<div id="comment" class="comment">-->
                                <!--<h3>Discuss about post</h3>-->


                                <!--&lt;!&ndash; Disqus Code Start  (Please Note: Disqus will not be load on local, You have to upload it on server.)&ndash;&gt;-->
                                <!--<div id="disqus_thread"></div>-->

                                <!--<noscript>Please enable JavaScript to view the <a-->
                                <!--href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>-->
                                <!--</noscript>-->
                                <!--&lt;!&ndash; Disqus Code End &ndash;&gt;-->

                                <!--</div>-->
                                <!-- Post Comment (Disqus) End -->


                            </div>
                        </div>

                    </div>


                    <!-- Subscribe Form Start -->
                    <!--<div class="col-md-8 col-md-offset-2">-->
                    <!--<form id="mc-form" method="post"-->
                    <!--action="http://uipasta.us14.list-manage.com/subscribe/post?u=854825d502cdc101233c08a21&amp;id=86e84d44b7">-->

                    <!--<div class="subscribe-form margin-top-20">-->
                    <!--<input id="mc-email" type="email" placeholder="Email Address" class="text-input">-->
                    <!--<button class="submit-btn" type="submit">Submit</button>-->
                    <!--</div>-->
                    <!--<p>Subscribe to my weekly newsletter</p>-->
                    <!--<label for="mc-email" class="mc-label"></label>-->
                    <!--</form>-->

                    <!--</div>-->
                    <!-- Subscribe Form End -->


                </div>


                <!-- Footer Start -->
                <div class="col-md-12 page-body margin-top-50 footer">
                    <footer>
                        <ul class="menu-link">
                            <li><a href="../index.html">Home</a></li>
                            <li><a href="../about.html">About</a></li>
                            <li><a href="../work.html">Work</a></li>
                            <li><a href="../contact.html">Contact</a></li>
                        </ul>


                        <!-- UiPasta Credit Start -->
                        <div class="uipasta-credit">Design By <a href="http://aishri.com" target="_blank">Aishvarya
                            Shrivastava</a></div>
                        <!-- UiPasta Credit End -->


                    </footer>
                </div>
                <!-- Footer End -->


            </div>
            <!-- Blog Post (Right Sidebar) End -->

        </div>
    </div>
</div>


<!-- Endpage Box (Popup When Scroll Down) Start -->
<div id="scroll-down-popup" class="endpage-box">
    <h4>Read Also</h4>
    <a href="#">How to processed video stream with Node/Express API and HTML 5...</a>
</div>
<!-- Endpage Box (Popup When Scroll Down) End -->


<!-- Back to Top Start -->
<a href="#" class="scroll-to-top"><i class="fa fa-long-arrow-up"></i></a>
<!-- Back to Top End -->


<!-- All Javascript Plugins  -->
<script type="text/javascript" src="../js/jquery.min.js"></script>
<script type="text/javascript" src="../js/plugin.js"></script>

<!-- Main Javascript File  -->
<script type="text/javascript" src="../js/scripts.js"></script>

<!-- Syntax Highlighter Javascript File  -->
<script type="text/javascript" src="../js/syntax/shCore.js"></script>
<script type="text/javascript" src="../js/syntax/shBrushCss.js"></script>
<script type="text/javascript" src="../js/syntax/shBrushJScript.js"></script>
<script type="text/javascript" src="../js/syntax/shBrushPerl.js"></script>
<script type="text/javascript" src="../js/syntax/shBrushPhp.js"></script>
<script type="text/javascript" src="../js/syntax/shBrushPlain.js"></script>
<script type="text/javascript" src="../js/syntax/shBrushPython.js"></script>
<script type="text/javascript" src="../js/syntax/shBrushRuby.js"></script>
<script type="text/javascript" src="../js/syntax/shBrushSql.js"></script>
<script type="text/javascript" src="../js/syntax/shBrushVb.js"></script>
<script type="text/javascript" src="../js/syntax/shBrushXml.js"></script>

<!-- Syntax Highlighter Call Function -->
<script type="text/javascript">
    SyntaxHighlighter.config.clipboardSwf = '../js/syntax/clipboard.swf';
    SyntaxHighlighter.all();
</script>


</body>
</html>
